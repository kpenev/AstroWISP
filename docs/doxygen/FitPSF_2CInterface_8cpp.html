<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: /home/kpenev/projects/git/AstroWISP/doc_src/FitPSF/CInterface.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js", "ams.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('FitPSF_2CInterface_8cpp.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">CInterface.cpp File Reference<div class="ingroups"><a class="el" href="group__FitPSF.html">FitPSF</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Define the C-interface functions for the FitPSF library.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="FitPSF_2CInterface_8h_source.html">CInterface.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="FitPSF_2Config_8h_source.html">Config.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="FitPSF_2Image_8h_source.html">Image.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="LinearSource_8h_source.html">LinearSource.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="FitPSF_2PiecewiseBicubic_8h_source.html">PiecewiseBicubic.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="CommandLineConfig_8h_source.html">../IO/CommandLineConfig.h</a>&quot;</code><br />
<code>#include &lt;cstdarg&gt;</code><br />
<code>#include &lt;string&gt;</code><br />
<code>#include &lt;sstream&gt;</code><br />
<code>#include &lt;iostream&gt;</code><br />
<code>#include &lt;cmath&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for CInterface.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="FitPSF_2CInterface_8cpp__incl.png" border="0" usemap="#a_2home_2kpenev_2projects_2git_2AstroWISP_2doc__src_2FitPSF_2CInterface_8cpp" alt=""/></div>
<map name="a_2home_2kpenev_2projects_2git_2AstroWISP_2doc__src_2FitPSF_2CInterface_8cpp" id="a_2home_2kpenev_2projects_2git_2AstroWISP_2doc__src_2FitPSF_2CInterface_8cpp">
<area shape="rect" title="Define the C&#45;interface functions for the FitPSF library." alt="" coords="1917,5,2102,69"/>
<area shape="rect" href="FitPSF_2CInterface_8h.html" title="Declare C&#45;style functions for accessing the functionality of FitPSF." alt="" coords="4210,581,4318,611"/>
<area shape="rect" title=" " alt="" coords="1509,925,1571,955"/>
<area shape="rect" title=" " alt="" coords="1115,1003,1194,1032"/>
<area shape="rect" title=" " alt="" coords="4640,1003,4723,1032"/>
<area shape="rect" href="FitPSF_2Config_8h.html" title="Declares the command line parser for the FitPSF tool." alt="" coords="2043,667,2125,697"/>
<area shape="rect" href="CommandLineConfig_8h.html" title="Declare a class for managing the configuration with which tools are run." alt="" coords="712,762,931,791"/>
<area shape="rect" title=" " alt="" coords="318,925,383,955"/>
<area shape="rect" href="FitPSF_2Image_8h.html" title="Defines a class describing an image of Pixel pixels." alt="" coords="2695,427,2774,456"/>
<area shape="rect" href="LinearSource_8h.html" title="Declares a class used for PSF fitting where pixel responses are linear functions of the shape paramet..." alt="" coords="2973,272,3104,301"/>
<area shape="rect" href="FitPSF_2PiecewiseBicubic_8h.html" title="The declarations of the functions related to fitting piecewise bicubic PSFs." alt="" coords="3163,117,3325,147"/>
<area shape="rect" title=" " alt="" coords="5181,117,5256,147"/>
<area shape="rect" href="Core_2CInterface_8h.html" title="Declare some opaque structures to be used when creating C&#45;interfaces to libraries." alt="" coords="4022,762,4181,791"/>
<area shape="rect" href="IO_2CInterface_8h.html" title="Declare C&#45;style functions for accessing the functionality of the IO library." alt="" coords="3889,848,4029,877"/>
<area shape="rect" href="Background_2CInterface_8h.html" title="Declare C&#45;style functions for accessing the functionality of the Background library." alt="" coords="3889,667,4100,697"/>
<area shape="rect" href="SharedLibraryExportMacros_8h_source.html" title=" " alt="" coords="2099,1003,2333,1032"/>
<area shape="rect" href="parse__hat__mask_8h.html" title="Declares a function for parsing HAT&#45;style maskes from image header." alt="" coords="3875,925,4029,955"/>
<area shape="rect" href="Core_2Image_8h.html" title="Declares a base class for images to be processed." alt="" coords="3177,762,3308,791"/>
<area shape="rect" href="Core_2Typedefs_8h.html" title="Some useful typedef statements." alt="" coords="3155,848,3255,877"/>
<area shape="rect" href="Error_8h.html" title="The hierarchy of exceptions for this project." alt="" coords="1738,925,1809,955"/>
<area shape="rect" title=" " alt="" coords="3515,925,3581,955"/>
<area shape="rect" title=" " alt="" coords="2456,925,2499,955"/>
<area shape="rect" title=" " alt="" coords="3382,925,3461,955"/>
<area shape="rect" title=" " alt="" coords="4237,925,4352,955"/>
<area shape="rect" href="Grid_8h.html" title="Some useful typedef statements." alt="" coords="2102,848,2215,877"/>
<area shape="rect" href="PSF_2Typedefs_8h.html" title="Some useful typedef statements." alt="" coords="2291,848,2439,877"/>
<area shape="rect" href="Annulus_8h.html" title="Declare a class defining an annulus around each source to measure the background in." alt="" coords="1297,848,1493,877"/>
<area shape="rect" href="PSF_2CommandLineUtil_8h.html" title="Declarations of utilities for command line parsing of PSF information." alt="" coords="1974,762,2186,791"/>
<area shape="rect" href="Background_2CommandLineUtil_8h.html" title="Declarations of utilities for command line parsing backgrund information." alt="" coords="955,753,1184,800"/>
<area shape="rect" href="Core_2CommandLineUtil_8h.html" title="Declarations of utilities for command line parsing common to all tools." alt="" coords="1685,762,1899,791"/>
<area shape="rect" href="NaN_8h.html" title="Defines not&#45;a&#45;number and infinity." alt="" coords="2671,925,2790,955"/>
<area shape="rect" href="IO_2CommandLineUtil_8h.html" title="Declarations of utilities for command line parsing of IO related options." alt="" coords="753,848,917,877"/>
<area shape="rect" title=" " alt="" coords="901,925,1117,955"/>
<area shape="rect" href="EllipticalGaussian_8h.html" title="Class defining ellptical Gaussian point spread functions (PSF)." alt="" coords="2818,848,3030,877"/>
<area shape="rect" title=" " alt="" coords="701,925,776,955"/>
<area shape="rect" href="Pixel_8h.html" title="Defines a class describing a single pixel participating in PSF/PRF fitting." alt="" coords="2474,581,2545,611"/>
<area shape="rect" href="Background_2Source_8h.html" title="Declares the base class for background extract(ion/ed) from an astronomical image." alt="" coords="2995,667,3082,697"/>
<area shape="rect" href="FitPSF_2Source_8h.html" title="Defines the base class for sources participating in PSF fitting." alt="" coords="2742,504,2829,533"/>
<area shape="rect" title=" " alt="" coords="2491,667,2533,697"/>
<area shape="rect" href="FitPSF_2Common_8h.html" title="Defines some of the functions needed exclusively by the FitPSF tool." alt="" coords="3127,581,3227,611"/>
<area shape="rect" href="SubPixelMap_8h.html" title="Declares the base class for all sub&#45;pixel maps." alt="" coords="2514,762,2697,791"/>
<area shape="rect" href="SourceID_8h.html" title="The declaration of the SourceID class." alt="" coords="1569,848,1671,877"/>
<area shape="rect" href="Flux_8h.html" title="Declare a class for flux measurements." alt="" coords="1441,762,1508,791"/>
<area shape="rect" href="PSF_2PiecewiseBicubic_8h.html" title="Defines a continuously differentiable PSF where each cell is a bicubic function." alt="" coords="4719,925,4929,955"/>
<area shape="rect" href="OverlapSource_8h.html" title="Defines the overlap&#45;related features of PSF fitting sources." alt="" coords="2503,349,2646,379"/>
<area shape="rect" href="OverlapGroup_8h.html" title="Defines a class for working with groups of overlapping sources." alt="" coords="2402,504,2537,533"/>
<area shape="rect" href="PiecewiseBicubicPSFSmoothing_8h_source.html" title=" " alt="" coords="3615,195,3886,224"/>
<area shape="rect" href="PiecewiseBicubicMap_8h.html" title="Declares a smoothly varying over an image piecewise bicubic PSF map class." alt="" coords="4459,848,4701,877"/>
<area shape="rect" href="SubPixelCorrectedFlux_8h.html" title="Defile a class that corrects for non&#45;uniform subpixel sensitivity and partial pixels in the aperture." alt="" coords="2208,659,2416,705"/>
<area shape="rect" title=" " alt="" coords="3282,195,3342,224"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ae1f79295fdaae971f6b0348a66184137"><td class="memItemLeft" align="right" valign="top">FittingConfiguration *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="FitPSF_2CInterface_8cpp.html#ae1f79295fdaae971f6b0348a66184137">create_psffit_configuration</a> ()</td></tr>
<tr class="memdesc:ae1f79295fdaae971f6b0348a66184137"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create an object for holding the configuration for PSF fitting.  <a href="FitPSF_2CInterface_8cpp.html#ae1f79295fdaae971f6b0348a66184137">More...</a><br /></td></tr>
<tr class="separator:ae1f79295fdaae971f6b0348a66184137"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06e4036e8f672394e9ea8689feaaf317"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="FitPSF_2CInterface_8cpp.html#a06e4036e8f672394e9ea8689feaaf317">destroy_psffit_configuration</a> (FittingConfiguration *configuration)</td></tr>
<tr class="memdesc:a06e4036e8f672394e9ea8689feaaf317"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroy a configuration previously created by <a class="el" href="FitPSF_2CInterface_8h.html#ae1f79295fdaae971f6b0348a66184137" title="Create an object for holding the configuration for PSF fitting.">create_psffit_configuration()</a>  <a href="FitPSF_2CInterface_8cpp.html#a06e4036e8f672394e9ea8689feaaf317">More...</a><br /></td></tr>
<tr class="separator:a06e4036e8f672394e9ea8689feaaf317"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68add1e8f40d7e251375a2daf92ce1f1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="FitPSF_2CInterface_8cpp.html#a68add1e8f40d7e251375a2daf92ce1f1">update_psffit_configuration</a> (bool prffit, FittingConfiguration *target_configuration,...)</td></tr>
<tr class="memdesc:a68add1e8f40d7e251375a2daf92ce1f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the configuration for PSF fitting.  <a href="FitPSF_2CInterface_8cpp.html#a68add1e8f40d7e251375a2daf92ce1f1">More...</a><br /></td></tr>
<tr class="separator:a68add1e8f40d7e251375a2daf92ce1f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a358afd92de988aff414dacd839551f1c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="FitPSF_2CInterface_8cpp.html#a358afd92de988aff414dacd839551f1c">prepare_fit_sources</a> (const <a class="el" href="classFitPSF_1_1Config.html">FitPSF::Config</a> &amp;configuration, std::vector&lt; <a class="el" href="classFitPSF_1_1Image.html">FitPSF::Image</a>&lt; <a class="el" href="classFitPSF_1_1LinearSource.html">FitPSF::LinearSource</a> &gt; &gt; &amp;fit_images, char ***source_ids, double **source_coordinates, double **psf_terms, bool **enabled, unsigned long *number_sources, unsigned long number_terms, BackgroundMeasureAnnulus **backgrounds, <a class="el" href="FitPSF_2Common_8h.html#a5432cdc9b255de958483cc386d5bba86">FitPSF::LinearSourceList</a> &amp;fit_sources, <a class="el" href="FitPSF_2Common_8h.html#a5432cdc9b255de958483cc386d5bba86">FitPSF::LinearSourceList</a> &amp;dropped_sources, const <a class="el" href="classCore_1_1SubPixelMap.html">Core::SubPixelMap</a> &amp;subpix_map, const <a class="el" href="classPSF_1_1PiecewiseBicubic.html">PSF::PiecewiseBicubic</a> &amp;psf, <a class="el" href="classIO_1_1H5IODataTree.html">IO::H5IODataTree</a> &amp;output_data_tree)</td></tr>
<tr class="memdesc:a358afd92de988aff414dacd839551f1c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a list of all fitting sources (assign pixels, filter etc.).  <a href="FitPSF_2CInterface_8cpp.html#a358afd92de988aff414dacd839551f1c">More...</a><br /></td></tr>
<tr class="separator:a358afd92de988aff414dacd839551f1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a455e1852245992146fe536638681a604"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="FitPSF_2CInterface_8cpp.html#a455e1852245992146fe536638681a604">local_get_psf_map_variables</a> (H5IODataTree *output_data_tree, unsigned image_index, double *column_data)</td></tr>
<tr class="memdesc:a455e1852245992146fe536638681a604"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the variables that participate in the PSF map from a data tree.  <a href="FitPSF_2CInterface_8cpp.html#a455e1852245992146fe536638681a604">More...</a><br /></td></tr>
<tr class="separator:a455e1852245992146fe536638681a604"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a224c67210062ea27a07d10eb3853de49"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="FitPSF_2CInterface_8cpp.html#a224c67210062ea27a07d10eb3853de49">piecewise_bicubic_fit</a> (double **pixel_values, double **pixel_errors, char **pixel_masks, unsigned long number_images, unsigned long image_x_resolution, unsigned long image_y_resolution, char ***source_ids, double **source_coordinates, double **psf_terms, bool **enabled, unsigned long *number_sources, unsigned long number_terms, BackgroundMeasureAnnulus **backgrounds, FittingConfiguration *configuration, double *subpix_sensitivities, unsigned long subpix_x_resolution, unsigned long subpix_y_resolution, H5IODataTree *output_data_tree)</td></tr>
<tr class="memdesc:a224c67210062ea27a07d10eb3853de49"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fit a smoothly varying piecewise bicubic PSF model.  <a href="FitPSF_2CInterface_8cpp.html#a224c67210062ea27a07d10eb3853de49">More...</a><br /></td></tr>
<tr class="separator:a224c67210062ea27a07d10eb3853de49"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Define the C-interface functions for the FitPSF library. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="ae1f79295fdaae971f6b0348a66184137"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae1f79295fdaae971f6b0348a66184137">&#9670;&nbsp;</a></span>create_psffit_configuration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FittingConfiguration* create_psffit_configuration </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create an object for holding the configuration for PSF fitting. </p>
<p>Must be initialized by updated_psffit_configuration() before use.</p>
<p>Must be destroyed by destroy_psffit_configuration when no longer needed to avoid a memory leak. </p>

</div>
</div>
<a id="a06e4036e8f672394e9ea8689feaaf317"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06e4036e8f672394e9ea8689feaaf317">&#9670;&nbsp;</a></span>destroy_psffit_configuration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void destroy_psffit_configuration </td>
          <td>(</td>
          <td class="paramtype">FittingConfiguration *&#160;</td>
          <td class="paramname"><em>configuration</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destroy a configuration previously created by <a class="el" href="FitPSF_2CInterface_8h.html#ae1f79295fdaae971f6b0348a66184137" title="Create an object for holding the configuration for PSF fitting.">create_psffit_configuration()</a> </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">configuration</td><td>The configuration to destroy. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a455e1852245992146fe536638681a604"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a455e1852245992146fe536638681a604">&#9670;&nbsp;</a></span>local_get_psf_map_variables()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool local_get_psf_map_variables </td>
          <td>(</td>
          <td class="paramtype">H5IODataTree *&#160;</td>
          <td class="paramname"><em>output_data_tree</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>image_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>column_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the variables that participate in the PSF map from a data tree. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">output_data_tree</td><td>The data tree containing the variables to extract. </td></tr>
    <tr><td class="paramname">image_index</td><td>The index of the image for wich to get the variables within the list of input images. </td></tr>
    <tr><td class="paramname">column_data</td><td>An array to fill with the values of the variables. All values of the first variable come first, followed by all values of the second variable etc. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a224c67210062ea27a07d10eb3853de49"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a224c67210062ea27a07d10eb3853de49">&#9670;&nbsp;</a></span>piecewise_bicubic_fit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool piecewise_bicubic_fit </td>
          <td>(</td>
          <td class="paramtype">double **&#160;</td>
          <td class="paramname"><em>pixel_values</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double **&#160;</td>
          <td class="paramname"><em>pixel_errors</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>pixel_masks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>number_images</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>image_x_resolution</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>image_y_resolution</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char ***&#160;</td>
          <td class="paramname"><em>source_ids</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double **&#160;</td>
          <td class="paramname"><em>source_coordinates</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double **&#160;</td>
          <td class="paramname"><em>psf_terms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool **&#160;</td>
          <td class="paramname"><em>enabled</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long *&#160;</td>
          <td class="paramname"><em>number_sources</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>number_terms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BackgroundMeasureAnnulus **&#160;</td>
          <td class="paramname"><em>backgrounds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FittingConfiguration *&#160;</td>
          <td class="paramname"><em>configuration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>subpix_sensitivities</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>subpix_x_resolution</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>subpix_y_resolution</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">H5IODataTree *&#160;</td>
          <td class="paramname"><em>output_data_tree</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fit a smoothly varying piecewise bicubic PSF model. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pixel_values</td><td>The pixel values of the calibrated images to perform simultaneous fits of. </td></tr>
    <tr><td class="paramname">pixel_errors</td><td>Estimated pixel errors of the calibrated images to perform simultaneous fits of. </td></tr>
    <tr><td class="paramname">pixel_masks</td><td>Mask flags of the calibrated images to perform simultaneous fits of. </td></tr>
    <tr><td class="paramname">number_images</td><td>How many images are being simultaneously fit. </td></tr>
    <tr><td class="paramname">image_x_resolution</td><td>The common x resolution of the images being processed. </td></tr>
    <tr><td class="paramname">image_y_resolution</td><td>The common y resolution of the images being processed. </td></tr>
    <tr><td class="paramname">source_ids</td><td>The IDs to assign to the sources in each image. The first index is the image index the second index is the source index within each image. </td></tr>
    <tr><td class="paramname">source_coordinates</td><td>The cordinates of the source centroids. The first index is the image index, the remaining array is organized as described by the source_coordinates argument of <a class="el" href="classFitPSF_1_1IOSources.html#a19472281ffe096d8089f0c41ed81138b" title="Construct from an array of sources.">FitPSF::IOSources::IOSources()</a>. </td></tr>
    <tr><td class="paramname">psf_terms</td><td>The values of each term PSF parameters depend on for each source. The first index is the image index, the remaining array is organized as described by the psf_terms argument of <a class="el" href="classFitPSF_1_1IOSources.html#a19472281ffe096d8089f0c41ed81138b" title="Construct from an array of sources.">FitPSF::IOSources::IOSources()</a>. </td></tr>
    <tr><td class="paramname">enabled</td><td>Flag indicating whether each source is allowed to participate in shape fitting or not. The first index is the image index, the remaining array is organized as described by the enabled argument of <a class="el" href="classFitPSF_1_1IOSources.html#a19472281ffe096d8089f0c41ed81138b" title="Construct from an array of sources.">FitPSF::IOSources::IOSources()</a>. </td></tr>
    <tr><td class="paramname">number_sources</td><td>How many sources are in column_data for each image. </td></tr>
    <tr><td class="paramname">number_terms</td><td>How many terms are used in PSF fitting. </td></tr>
    <tr><td class="paramname">backgrounds</td><td>Pointers to the measured background for the input sources indexed by the image index. </td></tr>
    <tr><td class="paramname">configuration</td><td>The configuration for how to do the fitting. </td></tr>
    <tr><td class="paramname">subpix_sensitivities</td><td>The sensitivities of the pixel at each sub-pixel part. </td></tr>
    <tr><td class="paramname">subpix_x_resolution</td><td>Subpixmap x resolution. </td></tr>
    <tr><td class="paramname">subpix_y_resolution</td><td>Subpixmap y resolution. </td></tr>
    <tr><td class="paramname">output_data_tree</td><td>A data tree to fill with the results. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a358afd92de988aff414dacd839551f1c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a358afd92de988aff414dacd839551f1c">&#9670;&nbsp;</a></span>prepare_fit_sources()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void prepare_fit_sources </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classFitPSF_1_1Config.html">FitPSF::Config</a> &amp;&#160;</td>
          <td class="paramname"><em>configuration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="classFitPSF_1_1Image.html">FitPSF::Image</a>&lt; <a class="el" href="classFitPSF_1_1LinearSource.html">FitPSF::LinearSource</a> &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>fit_images</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char ***&#160;</td>
          <td class="paramname"><em>source_ids</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double **&#160;</td>
          <td class="paramname"><em>source_coordinates</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double **&#160;</td>
          <td class="paramname"><em>psf_terms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool **&#160;</td>
          <td class="paramname"><em>enabled</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long *&#160;</td>
          <td class="paramname"><em>number_sources</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>number_terms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BackgroundMeasureAnnulus **&#160;</td>
          <td class="paramname"><em>backgrounds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="FitPSF_2Common_8h.html#a5432cdc9b255de958483cc386d5bba86">FitPSF::LinearSourceList</a> &amp;&#160;</td>
          <td class="paramname"><em>fit_sources</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="FitPSF_2Common_8h.html#a5432cdc9b255de958483cc386d5bba86">FitPSF::LinearSourceList</a> &amp;&#160;</td>
          <td class="paramname"><em>dropped_sources</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classCore_1_1SubPixelMap.html">Core::SubPixelMap</a> &amp;&#160;</td>
          <td class="paramname"><em>subpix_map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classPSF_1_1PiecewiseBicubic.html">PSF::PiecewiseBicubic</a> &amp;&#160;</td>
          <td class="paramname"><em>psf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classIO_1_1H5IODataTree.html">IO::H5IODataTree</a> &amp;&#160;</td>
          <td class="paramname"><em>output_data_tree</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a list of all fitting sources (assign pixels, filter etc.). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">configuration</td><td>The configuration for PSF fitting. </td></tr>
    <tr><td class="paramname">fit_images</td><td>The PSF fitting images for simultaneous fits. </td></tr>
    <tr><td class="paramname">source_ids</td><td>See same name argument to <a class="el" href="FitPSF_2CInterface_8cpp.html#a224c67210062ea27a07d10eb3853de49" title="Fit a smoothly varying piecewise bicubic PSF model.">piecewise_bicubic_fit()</a> </td></tr>
    <tr><td class="paramname">source_coordinates</td><td>See same name argument to <a class="el" href="FitPSF_2CInterface_8cpp.html#a224c67210062ea27a07d10eb3853de49" title="Fit a smoothly varying piecewise bicubic PSF model.">piecewise_bicubic_fit()</a> </td></tr>
    <tr><td class="paramname">psf_terms</td><td>See same name argument to <a class="el" href="FitPSF_2CInterface_8cpp.html#a224c67210062ea27a07d10eb3853de49" title="Fit a smoothly varying piecewise bicubic PSF model.">piecewise_bicubic_fit()</a> </td></tr>
    <tr><td class="paramname">enabled</td><td>See same name argument to <a class="el" href="FitPSF_2CInterface_8cpp.html#a224c67210062ea27a07d10eb3853de49" title="Fit a smoothly varying piecewise bicubic PSF model.">piecewise_bicubic_fit()</a> </td></tr>
    <tr><td class="paramname">number_sources</td><td>See same name argument to <a class="el" href="FitPSF_2CInterface_8cpp.html#a224c67210062ea27a07d10eb3853de49" title="Fit a smoothly varying piecewise bicubic PSF model.">piecewise_bicubic_fit()</a> </td></tr>
    <tr><td class="paramname">number_terms</td><td>See same name argument to <a class="el" href="FitPSF_2CInterface_8cpp.html#a224c67210062ea27a07d10eb3853de49" title="Fit a smoothly varying piecewise bicubic PSF model.">piecewise_bicubic_fit()</a> </td></tr>
    <tr><td class="paramname">backgrounds</td><td>The measured background for the sources in each image, indexed by the image index. </td></tr>
    <tr><td class="paramname">fit_sources</td><td>The list to add the newly created sources suitable for participating in the shape fit. </td></tr>
    <tr><td class="paramname">dropped_sources</td><td>The list to add the newly created sources if they are not suitable for participating in the shape fit. </td></tr>
    <tr><td class="paramname">subpix_map</td><td>The sub-pixel sensitivity map to assume. </td></tr>
    <tr><td class="paramname">psf</td><td>An instance of the PSF to use for PSF fitting, with properly defined grid, obviously no coefficients. </td></tr>
    <tr><td class="paramname">output_data_tree</td><td>The object to add result data to (e.g. PSF map terms). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a68add1e8f40d7e251375a2daf92ce1f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68add1e8f40d7e251375a2daf92ce1f1">&#9670;&nbsp;</a></span>update_psffit_configuration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void update_psffit_configuration </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>prffit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FittingConfiguration *&#160;</td>
          <td class="paramname"><em>target_configuration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update the configuration for PSF fitting. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">prffit</td><td>Are we deing PRF fittindg (in liu of PSF fitting)? </td></tr>
    <tr><td class="paramname">target_configuration</td><td>The configuration to update. </td></tr>
    <tr><td class="paramname">...</td><td>Alternating &lt;parameter name&gt;, &lt;parameter value&gt; pairs, with both etries being of type char* type. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_65a8df4c49f610a40e9230d0067dc79d.html">doc_src</a></li><li class="navelem"><a class="el" href="dir_da0161f9aa898feee64ca6d468d5d6fb.html">FitPSF</a></li><li class="navelem"><a class="el" href="FitPSF_2CInterface_8cpp.html">CInterface.cpp</a></li>
    <li class="footer">Generated on Wed Jan 15 2025 15:35:17 for My Project by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
